P8105\_hw3
================
Tiffany Tu
10/8/2018

## Problem 1

Cleaned data to focus on the “Overall Health” topic

``` r
overallhealth_brfss_smart2010 = brfss_smart2010 %>% 
  janitor::clean_names() %>%
  subset(., topic == "Overall Health") %>% 
  select(., -class, -topic, -question, -sample_size, -(confidence_limit_low:geo_location)) %>% 
  mutate(response = as.factor(response)) %>% 
  spread(response, data_value)

healthdata2002 = overallhealth_brfss_smart2010 %>% 
  filter(year == 2002) %>% 
  group_by(locationabbr) %>% 
  mutate(freq = n()) %>% 
  filter(freq == 7)
```

In 2002, CT, FL, NC were observed at 7 locations.

``` r
healthdata = overallhealth_brfss_smart2010 %>% 
  count(year, locationabbr)
  
ggplot(data = healthdata, aes(x = year, y = n, colour = locationabbr)) +
    geom_line(aes(group = locationabbr)) + ggtitle("Frequency of State Responses to Overall Health 2002-2010")
```

![](p8105_hw3_files/figure-gfm/spaghetti%20plot-1.png)<!-- -->

``` r
NYdata = overallhealth_brfss_smart2010 %>% 
  filter(year ==  2002 | year == 2006 | year == 2010) %>% 
  group_by(locationabbr) %>% 
  filter(locationabbr == "NY") %>% 
  ungroup() %>% 
  select(year, Excellent) 

NY_mean = c(mean(NYdata$year == 2002), mean(NYdata$year == 2006), mean(NYdata$year == 2010))
NY_sd = c(sd(NYdata$year == 2002), sd(NYdata$year == 2006), sd(NYdata$year == 2010))
NYsummarytable = data.frame(NY_mean, NY_sd) 
row.names(NYsummarytable) = c("2002", "2006", "2010")
kable(NYsummarytable, caption = "Mean and standard deviation of 'Excellent' Responses in NY")
```

|      | NY\_mean |    NY\_sd |
| ---- | -------: | --------: |
| 2002 |     0.25 | 0.4442617 |
| 2006 |     0.30 | 0.4701623 |
| 2010 |     0.45 | 0.5104178 |

Mean and standard deviation of ‘Excellent’ Responses in NY

``` r
annual_average = overallhealth_brfss_smart2010 %>%
  select(-locationdesc) %>% 
  group_by(year, locationabbr) %>% 
  summarise_all(funs(mean)) %>% 
  janitor::clean_names() %>% 
  gather(key = response, value = proportion, -year, -locationabbr) %>% 
  na.omit()

ggplot(data = annual_average, aes(x = year, y = proportion, colour = locationabbr)) + geom_line() + facet_grid(~ response, space = "free_y") + ggtitle("State-level averages of response to Overall Health")
```

![](p8105_hw3_files/figure-gfm/average%20across%20location%20in%20state-1.png)<!-- -->

## Problem 2

There are 134 aisles.

``` r
data(instacart)

insta = instacart
```
